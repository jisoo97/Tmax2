<script>
    var lowkey = [
        [1, 0, 0, 0],
        [0, 1, 0, 0],
        [0, 0, 1, 0],
        [0, 0, 0, 1],
        [1, 1, 0, 0],
        [1, 0, 1, 0],
        [1, 0, 0, 1],
        [0, 1, 1, 0],
        [0, 1, 0, 1],
        [0, 0, 1, 1],
        [1, 1, 1, 0],
        [1, 1, 0, 1],
        [0, 1, 1, 1],
        [1, 1, 1, 1]
    ]; //14

    var lowkey_seconds = [2.0, 2.25, 2.5, 2.75];
    //0.25 0.5 0.75 1

    /*var lowkey =[
        [1,0,0,0,0,0],
        [0,1,0,0,0,0],
        [0,0,1,0,0,0],
        [0,0,0,1,0,0],
        [0,0,0,0,1,0],
        [0,0,0,0,0,1],
        [1,0,0,0,0,1],
        [0,1,0,0,1,0],
        [0,0,1,1,0,0],
        [0,0,1,0,0,1],
        [0,1,0,0,1,0],
        [1,0,0,1,0,0],
        [1,1,0,0,1,1],
        [0,1,1,1,1,0],
        [1,0,1,1,0,1],
        [0,1,1,0,1,1],
        [1,1,0,1,1,0],
        [1,1,1,1,1,1]
      ]*/
    //
      /*  var lowkey =[
        [1,0,0,0,0,0,0,0],
        [0,1,0,0,0,0,0,0],
        [0,0,1,0,0,0,0,0],
        [0,0,0,1,0,0,0,0],
        [0,0,0,0,1,0,0,0],
        [0,0,0,0,0,1,0,0],
        [0,0,0,0,0,0,1,0],
        [0,0,0,0,0,0,0,1],
        [1,0,0,0,0,0,0,1],
        [0,1,0,0,0,0,1,0],
        [0,0,1,0,0,1,0,0],
        [0,0,0,1,1,0,0,0],
        [1,0,0,0,1,0,0,0],
        [0,1,0,0,0,1,0,0],
        [0,0,1,0,0,0,1,0],
        [0,0,0,1,0,0,0,1],
        [1,1,0,0,0,0,1,1],
        [0,1,1,0,0,1,1,0],
        [0,0,1,1,1,1,0,0],
        [1,0,0,1,1,0,0,1],
        [0,1,0,1,1,0,1,0],
        [1,1,0,0,1,1,0,0],
        [0,0,1,1,0,0,1,1],
        [1,0,1,0,1,0,1,0],
        [0,1,0,1,0,1,0,1],
        [1,1,1,0,1,1,1,0],
        [0,1,1,1,1,1,1,0],
        [1,1,0,1,1,0,1,1],
        [1,1,1,1,1,1,1,1]
      ];*/


    function writeMap(lineNum) {
        var pattern = [];
        for (var i = 0; i < lineNum; i++) {
            var num = Math.floor(Math.random() * lowkey.length);
            pattern[i] = JSON.parse(JSON.stringify(lowkey[num]));
            //document.write(pattern[i], "<br>");
        }
        return pattern;
    }

    function secondsGenerator(pattern,lineNum) {
        var sum_sec = 0;
        var i = 0;
        for (i=0; i < lineNum; i++) {
            var lowkey_seconds_random = Math.floor(Math.random() * lowkey_seconds.length);
            var sec = lowkey_seconds[lowkey_seconds_random];
            sum_sec = sum_sec + sec;
            pattern[i].unshift(sum_sec);
        }
        return pattern;
    }

    function beautifyContent(pattern){
      var i, j;
      var txt = "";
      for (i=0; i<pattern.length-1; i++){
          txt = txt + "["+pattern[i]+"],\n";
      }
      //last line
      txt = txt + "["+pattern[i]+"]";
      return txt;
    }

    function saveToFile_Chrome(fileName, content) {
      var blob = new Blob([content], { type: 'text/plain' });
      objURL = window.URL.createObjectURL(blob);
      // 이전에 생성된 메모리 해제
      if (window.__Xr_objURL_forCreatingFile__) {
        window.URL.revokeObjectURL(window.__Xr_objURL_forCreatingFile__);
      }
      window.__Xr_objURL_forCreatingFile__ = objURL;

      var a = document.createElement('a');
      a.download = fileName;
      a.href = objURL;
      a.click();
    }

    //MAIN
    var songLists = ['red_velvet', 'all_I_want_for_christmas','blueming','bts','flower_shower','hann','haon',
         'mc_mong','akmu','bbibbi','bol4','taeyeon','seventeen','zico','wanna_one'];
    var i=0;
    var lineNum = 35;
    var whole_line = "";

    for(i=0; i<songLists.length; i++){
      console.log("i : " + i + " ,song: " + songLists[i]);
      whole_line+= "const low_" + songLists[i] +"=[";
      var pattern = writeMap(lineNum);
      var pattern_sec = secondsGenerator(pattern,lineNum);
      whole_line+=beautifyContent(pattern_sec) +"];\n\n"
    }
    saveToFile_Chrome("low",whole_line);
</script>
